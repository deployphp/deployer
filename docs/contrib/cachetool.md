<!-- DO NOT EDIT THIS FILE! -->
<!-- Instead edit contrib/cachetool.php -->
<!-- Then run bin/docgen -->

# Cachetool Recipe

```php
require 'contrib/cachetool.php';
```

[Source](/contrib/cachetool.php)




## Configuration

- **cachetool** *(optional)*: accepts a *string* with the unix socket or ip address to php-fpm. If `cachetool` is not given, then the application will look for a `cachetool.yml` file and read the configuration from there.

    ```php
    set('cachetool', '/var/run/php-fpm.sock');
    // or
    set('cachetool', '127.0.0.1:9000');
    ```

You can also specify different cachetool settings for each host:
```php
host('staging')
    ->set('cachetool', '127.0.0.1:9000');

host('production')
    ->set('cachetool', '/var/run/php-fpm.sock');
```

By default, if no `cachetool` parameter is provided, this recipe will fallback to the global setting.

If your deployment user does not have permission to access the php-fpm.sock, you can alternatively use
the web adapter that creates a temporary php file and makes a web request to it with a configuration like
```php
set('cachetool_args', '--web --web-path=./public --web-url=https://{{hostname}}');
```

## Usage

Since APCu and OPcache deal with compiling and caching files, they should be executed right after the symlink is created for the new release:

```php
after('deploy:symlink', 'cachetool:clear:opcache');
or
after('deploy:symlink', 'cachetool:clear:apcu');
```

## Read more

Read more information about cachetool on the website:
http://gordalina.github.io/cachetool/


## Configuration
### cachetool
[Source](https://github.com/deployphp/deployer/blob/master/contrib/cachetool.php#L48)





### cachetool_url
[Source](https://github.com/deployphp/deployer/blob/master/contrib/cachetool.php#L56)

URL to download cachetool from if it is not available

CacheTool 9.x works with PHP >=8.1
CacheTool 8.x works with PHP >=8.0
CacheTool 7.x works with PHP >=7.3

```php title="Default value"
'https://github.com/gordalina/cachetool/releases/download/9.0.0/cachetool.phar'
```


### cachetool_args
[Source](https://github.com/deployphp/deployer/blob/master/contrib/cachetool.php#L57)





### bin/cachetool
[Source](https://github.com/deployphp/deployer/blob/master/contrib/cachetool.php#L58)



```php title="Default value"
if (!test('[ -f {{release_or_current_path}}/cachetool.phar ]')) {
run("cd {{release_or_current_path}} && curl -sLO {{cachetool_url}}");
}
return '{{release_or_current_path}}/cachetool.phar';
```


### cachetool_options
[Source](https://github.com/deployphp/deployer/blob/master/contrib/cachetool.php#L64)


:::info Autogenerated
The value of this configuration is autogenerated on access.
:::





## Tasks

### cachetool:clear:opcache
[Source](https://github.com/deployphp/deployer/blob/master/contrib/cachetool.php#L81)

Clears OPcode cache.

Clear opcache cache


### cachetool:clear:apcu
[Source](https://github.com/deployphp/deployer/blob/master/contrib/cachetool.php#L89)

Clears APCu system cache.

Clear APCU cache


### cachetool:clear:stat
[Source](https://github.com/deployphp/deployer/blob/master/contrib/cachetool.php#L97)

Clears file status and realpath caches.

Clear file status cache, including the realpath cache


