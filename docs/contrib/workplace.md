<!-- DO NOT EDIT THIS FILE! -->
<!-- Instead edit contrib/workplace.php -->
<!-- Then run bin/docgen -->

# Workplace Recipe

```php
require 'contrib/workplace.php';
```

[Source](/contrib/workplace.php)



This recipes works with Custom Integrations and Publishing Bots.
Add hook on deploy:
```
before('deploy', 'workplace:notify');
```
## Configuration
 - `workplace_webhook` - incoming workplace webhook **required**
   ```
   // With custom integration
   set('workplace_webhook', 'https://graph.facebook.com/<GROUP_ID>/feed?access_token=<ACCESS_TOKEN>');
   // With publishing bot
   set('workplace_webhook', 'https://graph.facebook.com/v3.0/group/feed?access_token=<ACCESS_TOKEN>');
   // Use markdown on message
   set('workplace_webhook', 'https://graph.facebook.com/<GROUP_ID>/feed?access_token=<ACCESS_TOKEN>&formatting=MARKDOWN');
   ```
 - `workplace_text` - notification message
   ```
   set('workplace_text', '_{{user}}_ deploying `{{what}}` to *{{where}}*');
   ```
 - `workplace_success_text` – success template, default:
  ```
  set('workplace_success_text', 'Deploy to *{{where}}* successful');
  ```
 - `workplace_failure_text` – failure template, default:
  ```
  set('workplace_failure_text', 'Deploy to *{{where}}* failed');
  ```
 - `workplace_edit_post` – whether to create a new post for deploy result, or edit the first one created, default creates a new post:
  ```
  set('workplace_edit_post', false);
  ```
## Usage
If you want to notify only about beginning of deployment add this line only:
```php
before('deploy', 'workplace:notify');
```
If you want to notify about successful end of deployment add this too:
```php
after('deploy:success', 'workplace:notify:success');
```
If you want to notify about failed deployment add this too:
```php
after('deploy:failed', 'workplace:notify:failure');
```


## Configuration
### workplace_text
[Source](https://github.com/deployphp/deployer/blob/master/contrib/workplace.php#L71)

Deploy message

```php title="Default value"
'_{{user}}_ deploying `{{what}}` to *{{where}}*'
```


### workplace_success_text
[Source](https://github.com/deployphp/deployer/blob/master/contrib/workplace.php#L72)



```php title="Default value"
'Deploy to *{{where}}* successful'
```


### workplace_failure_text
[Source](https://github.com/deployphp/deployer/blob/master/contrib/workplace.php#L73)



```php title="Default value"
'Deploy to *{{where}}* failed'
```


### workplace_edit_post
[Source](https://github.com/deployphp/deployer/blob/master/contrib/workplace.php#L76)

By default, create a new post for every message

```php title="Default value"
false
```



## Tasks

### workplace:notify
[Source](https://github.com/deployphp/deployer/blob/master/contrib/workplace.php#L79)

Notifies Workplace.




### workplace:notify:success
[Source](https://github.com/deployphp/deployer/blob/master/contrib/workplace.php#L103)

Notifies Workplace about deploy finish.




### workplace:notify:failure
[Source](https://github.com/deployphp/deployer/blob/master/contrib/workplace.php#L114)

Notifies Workplace about deploy failure.




